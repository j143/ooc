<svg width="1000" height="1600" viewBox="0 0 1000 1600" xmlns="http://www.w3.org/2000/svg">
    <defs>
        <style>
            /* Typography */
            .text-title { font-family: 'Inter', 'Segoe UI', Arial, sans-serif; font-size: 28px; font-weight: 800; fill: #1a202c; }
            .text-subtitle { font-family: 'Inter', 'Segoe UI', Arial, sans-serif; font-size: 16px; fill: #718096; font-weight: 400; }
            .text-layer { font-family: 'Inter', 'Segoe UI', Arial, sans-serif; font-size: 20px; font-weight: 700; fill: #2d3748; }
            .text-comp { font-family: 'Inter', 'Segoe UI', Arial, sans-serif; font-size: 16px; font-weight: 600; fill: #3182ce; }
            .text-body { font-family: 'Inter', 'Segoe UI', Arial, sans-serif; font-size: 14px; fill: #4a5568; }
            .text-code { font-family: 'JetBrains Mono', 'Fira Code', 'Courier New', monospace; font-size: 13px; fill: #805ad5; font-weight: 500; }
            .text-arrow { font-family: 'Inter', 'Segoe UI', Arial, sans-serif; font-size: 12px; font-weight: 600; fill: #4a5568; }
            .text-data { font-family: 'Inter', 'Segoe UI', Arial, sans-serif; font-size: 13px; fill: #38a169; font-weight: 700; }
            .text-stage-num { font-family: 'Inter', 'Segoe UI', Arial, sans-serif; font-size: 18px; fill: #e53e3e; font-weight: 800; }

            /* Geometry Styles */
            .box-layer { fill: #f7fafc; stroke: #e2e8f0; stroke-width: 2; rx: 16; }
            .box-comp { fill: #ffffff; stroke: #bee3f8; stroke-width: 1.5; rx: 8; filter: drop-shadow(0 2px 4px rgba(0,0,0,0.05)); }
            .box-sub { fill: #edf2f7; stroke: #cbd5e0; stroke-width: 1; rx: 6; }
            .box-obs { fill: #fffaf0; stroke: #f6ad55; stroke-width: 2; rx: 8; stroke-dasharray: 6 3; }
            
            /* Connectors */
            .line-std { stroke: #a0aec0; stroke-width: 2; marker-end: url(#arrow-std); fill: none; }
            .line-data { stroke: #38a169; stroke-width: 2.5; marker-end: url(#arrow-data); stroke-dasharray: 8 4; fill: none; }
        </style>

        <marker id="arrow-std" viewBox="0 0 10 10" refX="9" refY="5" markerWidth="5" markerHeight="5" orient="auto">
            <path d="M 0 0 L 10 5 L 0 10 z" fill="#a0aec0" />
        </marker>
        <marker id="arrow-data" viewBox="0 0 10 10" refX="9" refY="5" markerWidth="5" markerHeight="5" orient="auto">
            <path d="M 0 0 L 10 5 L 0 10 z" fill="#38a169" />
        </marker>
    </defs>

    <text x="500" y="50" text-anchor="middle" class="text-title">'paper' Framework Architecture</text>
    <text x="500" y="80" text-anchor="middle" class="text-subtitle">High-Performance Out-of-Core Execution Engine</text>

    <g id="layer-1">
        <rect x="100" y="120" width="800" height="110" class="box-layer" />
        <text x="130" y="155" class="text-layer">1. User Application Interface</text>
        <rect x="450" y="140" width="420" height="70" class="box-comp" />
        <text x="470" y="165" class="text-code">plan = (matrix_a @ matrix_b) + 10</text>
        <text x="470" y="190" class="text-code">result = plan.compute(cache_mode='optimal')</text>
    </g>

    <path d="M 500 230 L 500 270" class="line-std" />
    <text x="515" y="255" class="text-arrow">Initialize Plan Graph</text>

    <g id="layer-2">
        <rect x="100" y="270" width="800" height="130" class="box-layer" />
        <text x="130" y="305" class="text-layer">2. Plan Layer (AST Generation)</text>
        <rect x="130" y="325" width="740" height="55" class="box-comp" />
        <text x="500" y="358" text-anchor="middle" class="text-body">Constructs Directed Acyclic Graph (DAG) of **PlanNodes**</text>
    </g>

    <path d="M 500 400 L 500 440" class="line-std" />
    <text x="515" y="425" class="text-arrow">Trigger Three-Stage Optimization</text>

    <g id="layer-3">
        <rect x="100" y="440" width="800" height="360" class="box-layer" />
        <text x="130" y="475" class="text-layer">3. Three-Stage Optimizer</text>
        
        <rect x="130" y="500" width="230" height="150" class="box-comp"/>
        <text x="150" y="530" class="text-stage-num">①</text>
        <text x="180" y="530" class="text-comp">Analyze</text>
        <text x="150" y="560" class="text-body">• Generate I/O Trace</text>
        <text x="150" y="585" class="text-body">• Metadata Analysis</text>
        <text x="150" y="625" class="text-code">→ MatchResult</text>
        
        <rect x="385" y="500" width="230" height="150" class="box-comp"/>
        <text x="405" y="530" class="text-stage-num">②</text>
        <text x="435" y="530" class="text-comp">Rewrite</text>
        <text x="405" y="560" class="text-body">• Operator Fusion</text>
        <text x="405" y="585" class="text-body">• IR Transformation</text>
        <text x="405" y="625" class="text-code">→ OptimizedPlan</text>

        <rect x="640" y="500" width="230" height="150" class="box-comp"/>
        <text x="660" y="530" class="text-stage-num">③</text>
        <text x="690" y="530" class="text-comp">Execute</text>
        <text x="660" y="560" class="text-body">• Kernel Selection</text>
        <text x="660" y="585" class="text-body">• Thread Scheduling</text>
        <text x="660" y="625" class="text-code">→ Kernel Dispatch</text>

        <rect x="130" y="670" width="740" height="110" class="box-obs"/>
        <text x="150" y="705" class="text-comp">Heuristic Cost Model</text>
        <text x="150" y="735" class="text-body">Estimates execution cost based on: **Compute GFLOPS** | **I/O Bandwidth** | **Memory Pressure**</text>
    </g>

    <path d="M 500 800 L 500 840" class="line-std" />

    <g id="layer-4">
        <rect x="100" y="840" width="800" height="380" class="box-layer" />
        <text x="130" y="875" class="text-layer">4. Execution &amp; Memory Layer</text>

        <rect x="130" y="900" width="350" height="300" class="box-comp"/>
        <text x="150" y="930" class="text-comp">Buffer Manager</text>
        <rect x="150" y="945" width="310" height="100" class="box-sub"/>
        <text x="170" y="975" class="text-body" style="font-weight:700">Tile Cache (LRU/Optimal)</text>
        <text x="170" y="1005" class="text-code">[Tile_01] [Tile_02] ...</text>
        
        <rect x="150" y="1065" width="310" height="110" class="box-sub"/>
        <text x="170" y="1095" class="text-body" style="font-weight:700">Eviction Logic</text>
        <text x="170" y="1125" class="text-code">_evict_optimal(io_trace)</text>

        <rect x="520" y="900" width="350" height="300" class="box-comp"/>
        <text x="540" y="930" class="text-comp">Backend Kernels</text>
        <text x="540" y="965" class="text-body">• Parallel Tile Processing</text>
        <text x="540" y="990" class="text-body">• Vectorized Operations (NumPy/C++)</text>
        <text x="540" y="1030" class="text-code">Fused: add_mul_kernel()</text>
        <text x="540" y="1055" class="text-code">Atomic: matmul_kernel()</text>
    </g>
    
    <path d="M 245 650 Q 50 750 130 950" class="line-data" />
    <text x="60" y="780" class="text-data">I/O Trace Injection</text>

    <g id="layer-5">
        <rect x="100" y="1240" width="800" height="280" class="box-layer" />
        <text x="130" y="1275" class="text-layer">5. Core I/O Layer (PaperMatrix)</text>
        
        <rect x="130" y="1300" width="350" height="180" class="box-sub"/>
        <text x="305" y="1335" text-anchor="middle" class="text-comp">Read Path</text>
        <text x="305" y="1370" text-anchor="middle" class="text-code">numpy.memmap()</text>
        <text x="305" y="1410" text-anchor="middle" class="text-body">OS-level virtual memory mapping</text>
        <text x="305" y="1435" text-anchor="middle" class="text-body">for random access performance.</text>

        <rect x="520" y="1300" width="350" height="180" class="box-sub"/>
        <text x="695" y="1335" text-anchor="middle" class="text-comp">Write Path</text>
        <text x="695" y="1370" text-anchor="middle" class="text-code">File.seek() &amp; .write()</text>
        <text x="695" y="1410" text-anchor="middle" class="text-body">Direct-to-disk tiled streaming</text>
        <text x="695" y="1435" text-anchor="middle" class="text-body">ensuring memory footprint stability.</text>
    </g>

    <g id="observability">
        <rect x="890" y="120" width="100" height="1400" class="box-obs" opacity="0.4" />
        <text x="960" y="820" text-anchor="middle" class="text-comp" transform="rotate(-90 960 820)" style="fill:#d97706">Observability &amp; Telemetry</text>
        
        <rect x="680" y="20" width="310" height="85" class="box-obs" />
        <text x="695" y="50" class="text-comp" style="fill:#d97706">Monitoring</text>
        <text x="695" y="75" class="text-body">Logs | Performance Traces | Resource Usage</text>
    </g>
</svg>